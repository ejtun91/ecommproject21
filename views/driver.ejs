<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <style>
      table, td, th {
  border: 1px solid black;
  background-color: white;
  padding: 10px;
  
}

.ui-content{
  min-height: 100vh;
  background-color: rgb(229, 246, 252);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.ui-btn {
    height: 20px !important;
    margin: 30px auto;
    border-radius: 10px;
    border: 1px solid black !important;
}
.ui-btn:hover{
  box-shadow: 3px 3px 3px rgb(154, 155, 155);
  
  background: black !important;
  color: white !important;
}

      
      </style>
</head>
<body>
    <div data-role="header">
		<h1>Driver</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content">
        <button id="updatestatus" style="width: 30%;padding-bottom: 30px;margin: 15px 10px;" >CLICK TO MAKE ALL ORDERS READY FOR DISPATCH</button>
        <h2 id="status"></h2>
    <table id="managerOutput" style="width:50%;text-align: center;margin: auto;border-collapse: collapse;">
      <tr><th>ITEMS-QTY</th><% result.forEach(function(item) { %>
        <td><%= item.items %></td>
        <% }); %></tr><tr><th>ADDRESS</th><% result.forEach(function(item) { %>
                <td><%= item.address %></td>
                <% }); %></tr>
                <tr><th>STATUS</th><% result.forEach(function(item) { %>
                    <td><%= item.orderstatus %></td>
                    <% }); %></tr><tr><th>Update</th><% result.forEach(function(item) { %>
                        <td><button  style="padding-bottom: 30px;margin: 15px auto;"  id="update" onclick="location.href='order/<%= item.id %>'">DELIVER ORDER</button></td>
                        <% }); %></tr>
      </tr>
    </table>
         
    
	</div><!-- /content -->

	<div data-role="footer">
		<h4>Page Footer</h4>
	</div><!-- /footer -->

    <script>
        // $('#update').click(function(event){
        //     event.preventDefault();

        //     window.location.reload();
        // })

        $('#update').click(function(event){
                event.preventDefault();

                

            })
      
        $('#updatestatus').click(function(event){
                event.preventDefault();

                $.post("/updateStatus", function(data){
                  
                })
                $('#status').append("Items are getting ready.")
                setTimeout(() => {
                  window.location.reload()
                }, 3000)

               
            })
       
    </script>
    
</body>
</html>